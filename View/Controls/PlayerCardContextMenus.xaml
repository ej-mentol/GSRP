<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:vm="clr-namespace:GSRP.ViewModels"
                    xmlns:conv="clr-namespace:GSRP.Converters"
                    xmlns:controls="clr-namespace:GSRP.Views.Controls">

    <conv:TupleConverter x:Key="TupleConverter"/>
    <conv:PathToImageConverter x:Key="PathToImage"/>

    <!-- Main Context Menu for the PlayerCard Border -->
    <ContextMenu x:Key="PlayerCardMainContextMenu" Style="{StaticResource ThemedContextMenu}">
        <MenuItem Header="Copy Name"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.CopyPlayerNameCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#3b82f6" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="👤" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Copy PersonaName"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.CopyPlayerPersonaNameCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#3b82f6" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="👤" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Copy Alias"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.CopyPlayerAliasCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#10b981" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="📝" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Copy SteamID64"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.CopyPlayerIdCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#f59e0b" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="🔢" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Copy SteamID"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.CopyPlayerSteamId2Command, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#84cc16" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="🆔" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Open in Browser"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.OpenInBrowserCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#10b981" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="🌐" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <Separator/>

        <MenuItem Header="Copy to Report"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.CopyPlayerToReportCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#ef4444" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="🚩" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Copy as Report" Style="{StaticResource ThemedMenuItem}"
                  ItemsSource="{Binding PlacementTarget.Tag.ServerList, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#d946ef" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="📜" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
            <MenuItem.ItemContainerStyle>
                <Style TargetType="MenuItem" BasedOn="{StaticResource ThemedMenuItem}">
                    <Setter Property="Header" Value="{Binding}"/>
                    <Setter Property="Command" Value="{Binding PlacementTarget.Tag.CopyReportForServerCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"/>
                    <Setter Property="CommandParameter">
                        <Setter.Value>
                            <MultiBinding Converter="{StaticResource TupleConverter}">
                                <Binding Path="PlacementTarget.DataContext" RelativeSource="{RelativeSource AncestorType=ContextMenu}"/>
                                <Binding/>
                            </MultiBinding>
                        </Setter.Value>
                    </Setter>
                </Style>
            </MenuItem.ItemContainerStyle>
        </MenuItem>

        <Separator/>

        <MenuItem Header="Set Alias"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.UpdatePlayerAliasAsyncCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#06b6d4" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="✏️" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Change Game Color"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.SetPlayerGameColorAsyncCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#ec4899" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="🎨" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Change Steam Color"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.SetPlayerSteamColorAsyncCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#06b6d4" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="🎨" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <MenuItem Header="Change Alias Color"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.SetPlayerAliasColorAsyncCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#d946ef" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="🎨" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>

        <Separator/>

        <MenuItem Header="Copy as Image"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.CreatePlayerCardImageCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#6366f1" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="📷" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>
    </ContextMenu>

    <!-- Context Menu for the three-dots Button -->
    <ContextMenu x:Key="PlayerCardButtonContextMenu" Style="{StaticResource ThemedContextMenu}">
        <MenuItem Header="Update Profile"
                  Style="{StaticResource ThemedMenuItem}"
                  Command="{Binding PlacementTarget.Tag.UpdateSinglePlayerVacStatusCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                  CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
            <MenuItem.Icon>
                <Border Background="#3b82f6" CornerRadius="3" Width="16" Height="16">
                    <TextBlock Text="🔄" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </MenuItem.Icon>
        </MenuItem>
    </ContextMenu>

</ResourceDictionary>
